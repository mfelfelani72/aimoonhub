"use strict";(self.webpackChunkbuiler=self.webpackChunkbuiler||[]).push([[1061],{1061:(t,e,r)=>{r.d(e,{A:()=>b});var n=r(6540),o=r(462),a=r(8610),i=r(7866),c=r(3149),l=r(1335),u=r(1358),s=r.n(u),f=r(8463),h=r.n(f),m=r(2585);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function w(){}function b(){}function x(){}var E={};u(E,i,(function(){return this}));var L=Object.getPrototypeOf,N=L&&L(L(F([])));N&&N!==r&&n.call(N,i)&&(E=N);var S=x.prototype=w.prototype=Object.create(E);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==d(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(d(e)+" is not iterable")}return b.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(_.prototype),u(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function v(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w.apply(null,arguments)}const b=function(t){var e=w({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t)),r=(0,o.Bd)().t,u=y((0,n.useState)(20),2),f=u[0],d=u[1],g=y((0,n.useState)(!1),2),b=g[0],x=g[1],E=y((0,n.useState)({width:640,height:480}),2),L=E[0],N=E[1],S=(0,n.useRef)(!0),j=(0,n.useRef)(null),_=(0,n.useRef)(null),O=(0,n.useRef)(null),k=(0,n.useRef)(null),T=!1,A=function(t){N({width:t.videoWidth,height:t.videoHeight})};return(0,n.useEffect)((function(){if("lenz"==(null==e?void 0:e.drawerName)){var t,r=j.current;return t=function(t,r){t.addEventListener("loadedmetadata",(function(){return A(t)}));var n,o,c=new a.FaceDetection({locateFile:function(t){return"/assets/mediapipe/".concat(t)}});c.setOptions({model:"short",minDetectionConfidence:.7,minSuppressionThreshold:.3}),c.onResults((function(n){if(S.current){var o=_.current,a=O.current;o.getContext("2d").clearRect(0,0,o.width,o.height),n.detections.length>0&&n.detections.forEach((function(n){if(n.landmarks){var o=t.videoWidth,i=t.videoHeight,c=t.offsetWidth,l=t.offsetHeight,u=c/o,s=l/i,f=Math.min(u,s),h=(c-o*f)/2,p=(l-i*f)/2,v=document.getElementById("boxFace"),y=a.getBoundingClientRect(),g=v.getBoundingClientRect(),w=g.left-y.left,E=g.top-y.top,L=w+g.width,N=E+g.height,_=0;n.landmarks.forEach((function(t){var e=o-t.x*o,r=t.y*i,n=e*f+h,a=r*f+p;n>=w&&n<=L&&a>=E&&a<=N&&_++})),d(Math.round(_/6*100)),6!==_||b?_<6&&(x(!1),k.current&&(clearTimeout(k.current),k.current=null)):(x(!0),k.current=setTimeout((function(){!function(){if(1!=T){var t=j.current,r=document.createElement("canvas"),n=r.getContext("2d"),o=document.getElementById("boxFace").getBoundingClientRect(),a=t.getBoundingClientRect(),i=t.videoWidth/a.width,c=t.videoHeight/a.height,l=(o.left-a.left)*i-30,u=(o.top-a.top)*c-30,s=o.width*i+50,f=o.height*c+120;r.width=s,r.height=f,n.translate(s,0),n.scale(-1,1),n.drawImage(t,l,u,s,f,0,0,s,f);var h=r.toDataURL("image/png",1);null==e||e.setImage(h),T=!0}}(),S.current=!1}),5e3),setTimeout((function(){(0,m.y)(null==e?void 0:e.drawerConfig)}),9e3),setTimeout((function(){r.stop()}),11e3))}}))}}));try{return r=new i.Camera(j.current,{onFrame:(n=p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!S.current){t.next=3;break}return t.next=3,c.send({image:j.current});case 3:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(t){v(a,r,o,i,c,"next",t)}function c(t){v(a,r,o,i,c,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)}),width:640,height:480}),r.start(),r}catch(t){console.error("Error while start camera",t)}}(r,t),function(){r.removeEventListener("loadedmetadata",A),S.current=!1,t&&t.stop(),k.current&&clearTimeout(k.current)}}}),[null==e?void 0:e.drawerName]),n.createElement(n.Fragment,null,n.createElement("div",{ref:O,className:"relative -pt-8 w-[60rem] h-[calc(85vh)] -my-4 rtl:-mr-[calc((60rem-100%)/2)] ltr:-ml-[calc((60rem-100%)/2)] rtl:xs:-mr-[18.5rem] ltr:xs:-ml-[18.5rem]"},n.createElement("div",{className:"relative w-full h-full"},n.createElement("video",{className:"object-fill rotate-y-180",ref:j,autoPlay:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),n.createElement("div",{id:"boxFace",className:"absolute top-[calc(10vh)] left-1/2 transform -translate-x-1/2 w-[17.5rem] h-[17.5rem]"},n.createElement(c.A,{src:s(),alt:"scan-face",className:"h-[17.5rem] w-[17.5rem]"}),n.createElement(l.A,{className:"text-center mt-4 font-bold text-white"},r("place_face_in_frame"))),n.createElement("canvas",{ref:_,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},width:L.width,height:L.height})),"empty"!==(null==e?void 0:e.image)&&n.createElement("div",{className:"w-[60rem] absolute top-[calc(10vh+4rem)] flex flex-col items-center"},n.createElement("div",{className:""},n.createElement("div",{className:"w-[122.55px] h-[122.55px] relative"},n.createElement("div",{className:"w-[122.55px] h-[122.55px] left-0 top-0 absolute bg-Success/50 rounded-full"}),n.createElement("div",{className:"w-[95.49px] h-[95.49px] left-[13.53px] top-[13.53px] absolute bg-Success/100 rounded-full"}),n.createElement("div",{className:"w-[68.41px] h-[68.41px] left-[27.07px] top-[27.07px] absolute bg-Success/300 rounded-full inline-flex items-center justify-center"},n.createElement(c.A,{src:h(),alt:"light_tick_square",className:"w-6 h-6"})))),n.createElement(l.A,{className:"text-center mt-4 font-bold text-white"},r("your_face_scanned"))),n.createElement("div",{className:"w-[60rem] fixed bottom-8"},n.createElement("div",{className:"flex flex-col w-full items-center"},n.createElement("div",{className:"flex flex-row w-full items-center justify-center gap-1"},n.createElement("span",{className:"text-center text-white ltr:font-spaceGrotesk"},f,"%")),n.createElement("div",{className:"w-[17.5rem] h-[0.75rem] flex ltr:flex-row rtl:flex-row-reverse mt-2 bg-Neutral/50 rounded-lg"},n.createElement("div",{style:{width:"".concat(f,"%")},className:"".concat(f<65?"bg-Error/400":f<85?"bg-Warning/400":"bg-Success/400"," transition-all duration-1000 rounded-lg")}))))))}}}]);